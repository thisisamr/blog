import { buildDynamicMeta,buildDynamicMDX } from "nextra/remote";
import { useData } from "nextra/hooks";
import { Callout, RemoteContent, Tabs } from "nextra/components";
import { GetStaticPaths } from "next";

export async function getStaticProps({ params }) {
  const { __nextra_pageMap } = await buildDynamicMeta();
  let dynamicMdx = {};
  try {
    const ress = await fetch(`/api/blog/${params.slug}`);
    const text =await ress.json()
    const t =text.content;
    dynamicMdx = await buildDynamicMDX(t,{mdxOptions:{

    }});
return {
props: {
   __nextra_pageMap,
      ...dynamicMdx
},
revalidate: 10,
};

  } catch (error) {

    console.log(error)

dynamicMdx = await buildDynamicMDX("# Error\n\n## OOPS We Couldn't Get Your Post Please Be patient we Are under Construction\n\n## ðŸš§",{mdxOptions:{}});
return {

props: {

   __nextra_pageMap,
      ...dynamicMdx
},
};
   
  }

}

export const getStaticPaths= async ()=> {
return {
fallback: "blocking",
paths: [{params:{slug:"coffee"}}, {params:{slug:"gql"}}],
};
}

<RemoteContent/>